<div ng-controller="CalcCtrl"><div ng-repeat="f in formulae"><button type="button" ng-click="f.calc()" data-toggle="collapse" data-target="#calcAccordion{{$index}}" class="btn btn-danger">{{f.title}}</button><div id="calcAccordion{{$index}}" class="collapse in collapsed"><span>{{f.value()|number:1}}</span><label ng-repeat="var in f.vars"><span>{{var.name}}</span><input ng-model="var.val" ng-change="f.calc()"/></label></div></div>{{formulae}}</div>